<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Inverter: AXI4Stream Inverter</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Inverter
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">AXI4Stream <a class="el" href="class_inverter.html" title="The output of this module contains: 4 ports of inverted_tdata: inverted_tdata_MSB,...">Inverter</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_D__MW_MW_Utility_Ip_Core_ip_repo_AXI4Stream_Inverter_README"></a>This is a Vivado 2019.1 Project, used to invert the incoming BMP image. This module is contained in a larger project, which aims to make a transfer of data among the DDR present on the Zynq and the PL. In particular the block scheme we are referring to is the following:</p>
<p><img src="Block_Scheme.svg" alt="" style="pointer-events: none;" class="inline" title="Scheme image"/>   </p>
<p>The Vivado block design in which is contained the <em><a class="el" href="class_a_x_i4_stream___inverter.html" title="The entity of this module can be described by the following images:">AXI4Stream_Inverter</a></em> is the following:</p>
<p><img src="BD_complete_structure.PNG" alt="" class="inline" title="Vivado Block Design image"/>   </p>
<p>Now let's focus on the <a class="el" href="class_inverter.html" title="The output of this module contains: 4 ports of inverted_tdata: inverted_tdata_MSB,...">Inverter</a>. First of all we have to remember and analyze how a BMP image is structured:</p>
<p><img src="BMP_Header.PNG" alt="" class="inline" title="BMP image"/>   </p>
<p>There are 54 Bytes of Header, and this is important because we don't have to invert those Bytes. In the design of this module the Bytes from 0x02 to 0x05 has been exploited to extrapolate the dimension of the incoming file.</p>
<p><img src="Data.svg" alt="" style="pointer-events: none;" class="inline" title="Data image"/>   </p>
<p>In the previous figure, we understand how the header has been used to extract the file dimension, but being written in Little Endian format, we have to invert it in order to get the real dimension value.</p>
<p>The incoming data, being an image, can have values ranging just from 0 to 255, so the <em>DATA_WIDTH</em> is set to 8, indeed <em>2^8 = 256</em>. The basic idea behind this module is counting the number of incoming packets, extracting the image dimension from the packets 3,4,5,6, inverting the data from the packet 55 on, and then resetting the packet counter to 0 once the image has been completely inverted. The way this operation is done, will be described in more detail later on in the documentation.</p>
<p>Furthermore this module gives the opportunity to exploit 2 debugging ports <em>counter</em> and <em>file_dimension</em> that will be available as soon as the generic <em>DEBUG_MODE</em> is set to <em>TRUE</em>. <em>counter</em> keeps tracks of the internal packet counter, while <em>file_dimension</em> tells us the dimension of the incoming data extrapolated by the module.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
IP-Core</h1>
<p>Wrapping of <em><a class="el" href="class_inverter.html" title="The output of this module contains: 4 ports of inverted_tdata: inverted_tdata_MSB,...">Inverter</a></em> for AXI4-Stream interface for IP-Core and usage with AXI DMA.</p>
<p><img src="Inverter_IP-Core.PNG" alt="" class="inline" title="IP-Core image"/>   </p>
<h2><a class="anchor" id="autotoc_md2"></a>
Generic</h2>
<ul>
<li><b>DEBUG_MODE</b>: If DEBUG_MODE = TRUE, the module shows the ports <em>counter</em> and <em>file_dimension</em> in such a way we can use them for debugging with ILA, <em>BOOL</em> type, default <b>TRUE</b>.</li>
<li><b>DATA_WIDTH</b>: The incoming image can have values that range from 0 to 255 by definition, so the data can be represented by just 8 bits, <em>POSITIVE</em> type, default <b>8</b>.</li>
</ul>
<p><img src="Inverter_Generic.PNG" alt="" class="inline" title="Generic image"/>   </p>
<h2><a class="anchor" id="autotoc_md3"></a>
Port</h2>
<ul>
<li><b>resetn</b>: Synchronous resetn active low.</li>
<li><b>clk</b>: PS Clock.</li>
<li><b>s00_axis</b>: AXI4 Stream Slave interface, data coming from AXI DMA.<ul>
<li><b>s00_axis_tdata</b>: Incoming data from the DMA/Chip2Chip, <em>STD_LOGIC_VECTOR((((DATA_WIDTH -1)/32+1)*32)-1 downto 0)</em> type.</li>
<li><b>s00_axis_tvalid</b>: Valid of the incoming data, <em>STD_LOGIC</em> type.</li>
<li><b>s00_axis_tlast</b>: End of the incoming packets, <em>STD_LOGIC</em> type. <br  />
</li>
<li><b>s00_axis_tready</b>: Ready of the inverter, coming from the "following" DMA, <em>STD_LOGIC</em> type.</li>
</ul>
</li>
<li><b>m00_axis</b>: AXI4 Stream Master interface, inverted image sent to the DDR.<ul>
<li><b>m00_axis_tdata</b>: Inverted output to be sent to the DDR via DMA/Chip2Chip, <em>STD_LOGIC_VECTOR((((DATA_WIDTH -1)/32+1)*32)-1 downto 0)</em> type.</li>
<li><b>m00_axis_tvalid</b>: Output valid, <em>STD_LOGIC</em> type.</li>
<li><b>m00_axis_tlast</b>: End of the exiting packets, <em>STD_LOGIC</em> type. <br  />
</li>
<li><b>m00_axis_tready</b>: Ready of the following DMA/Chip2Chip, <em>STD_LOGIC</em> type. <br  />
</li>
</ul>
</li>
</ul>
<p><img src="Inverter_Signals.PNG" alt="" class="inline" title="Signals image"/>   </p>
<p><br  />
</p>
<p><img src="ILA_Wave.PNG" alt="" class="inline" title="ILA image"/>   </p>
<h1><a class="anchor" id="autotoc_md4"></a>
Sources</h1>
<p>We can find in <em>hdl/</em> the following module directory:</p>
<ul>
<li><b><a class="el" href="class_a_x_i4_stream___inverter.html" title="The entity of this module can be described by the following images:">AXI4Stream_Inverter</a></b>: Wrapper used for renaming the input and output interfaces with AXI4-Stream for IP-Core.</li>
<li><b><a class="el" href="class_inverter.html" title="The output of this module contains: 4 ports of inverted_tdata: inverted_tdata_MSB,...">Inverter</a></b>: It is the module that performs the inversion of the incoming data.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Simulation</h1>
<p>We can find in <em>src/</em> the following module directory:</p>
<ul>
<li><b><a class="el" href="classtb___a_x_i4_stream___inverter.html">tb_AXI4Stream_Inverter</a></b>: HDL simulation of <em><a class="el" href="class_a_x_i4_stream___inverter.html" title="The entity of this module can be described by the following images:">AXI4Stream_Inverter</a></em>.</li>
<li><b>tb_AXI4Stream_Inverter_behav</b>: Waveform of <em><a class="el" href="classtb___a_x_i4_stream___inverter.html">tb_AXI4Stream_Inverter</a></em>.</li>
</ul>
<p><img src="Waveform.PNG" alt="" class="inline" title="Waveform image"/>    </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
